<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>COMING SOON - The Mythical Cursed-Nightmare</title>

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg" />
    <link rel="alternate icon" href="favicon.svg" />

    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.svg" />

    <!-- PWA対応 -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <!-- OGP Meta Tags -->
    <meta property="og:title" content="The Mythical Cursed-Nightmare - COMING SOON" />
    <meta property="og:description" content="Halloween 2024 - Something dark is awakening..." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="apple-touch-icon.svg" />

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      /* PixelFontは現在未使用
        @font-face {
            font-family: 'PixelFont';
            src: url('assets/fonts/PixelMplus12-Regular.ttf') format('truetype');
        }
        */

      body {
        font-family: monospace;
        background: linear-gradient(180deg, #0a0a0a 0%, #1a0a2a 100%);
        color: #fff;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        overflow-x: hidden;
        position: relative;
      }

      /* 背景エフェクト */
      .bg-particles {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 1;
      }

      .particle {
        position: absolute;
        background: #9b4dff;
        border-radius: 50%;
        opacity: 0;
        animation: float 15s infinite;
      }

      @keyframes float {
        0%,
        100% {
          opacity: 0;
          transform: translateY(100vh) scale(0);
        }
        10% {
          opacity: 0.4;
        }
        90% {
          opacity: 0.4;
        }
        100% {
          transform: translateY(-100vh) scale(1);
        }
      }

      /* メインコンテナ */
      .container {
        text-align: center;
        z-index: 10;
        padding: 2rem;
        max-width: 800px;
        width: 100%;
      }

      /* ロゴ・タイトル */
      .logo-container {
        margin-bottom: 3rem;
        animation: pulse 2s ease-in-out infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      .monster-preview {
        width: 180px;
        height: 180px;
        margin: 0 auto 2rem;
        image-rendering: pixelated;
        filter: brightness(0) opacity(0.3);
        animation: reveal 3s ease-in-out infinite;
      }

      @keyframes reveal {
        0%,
        100% {
          filter: brightness(0) opacity(0.3);
        }
        50% {
          filter: brightness(1) opacity(1) drop-shadow(0 0 20px #9b4dff);
        }
      }

      h1 {
        font-size: clamp(1.5rem, 5vw, 3rem);
        background: linear-gradient(45deg, #9b4dff, #ff4d4d, #9b4dff);
        background-size: 200% 200%;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: gradient 3s ease infinite;
        margin-bottom: 1rem;
        text-shadow: 0 0 30px rgba(155, 77, 255, 0.5);
      }

      @keyframes gradient {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      @keyframes glow {
        0%,
        100% {
          box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }
        50% {
          box-shadow: 0 0 40px rgba(255, 215, 0, 0.8);
        }
      }

      .tagline {
        font-size: 1.2rem;
        color: #b792ff;
        margin-bottom: 3rem;
        letter-spacing: 0.2em;
      }

      /* カウントダウン */
      .countdown-container {
        margin: 3rem 0;
        padding: 2rem;
        background: rgba(155, 77, 255, 0.1);
        border: 2px solid #9b4dff;
        border-radius: 10px;
        backdrop-filter: blur(10px);
      }

      .countdown-label {
        font-size: 1rem;
        color: #b792ff;
        margin-bottom: 1rem;
        text-transform: uppercase;
        letter-spacing: 0.3em;
      }

      .countdown {
        display: flex;
        justify-content: center;
        gap: 1rem;
        flex-wrap: wrap;
      }

      .time-block {
        background: rgba(0, 0, 0, 0.5);
        padding: 1rem;
        border-radius: 10px;
        min-width: 80px;
        border: 1px solid #9b4dff;
      }

      .time-value {
        font-size: 2.5rem;
        font-weight: bold;
        color: #fff;
        text-shadow: 0 0 10px #9b4dff;
      }

      .time-label {
        font-size: 0.8rem;
        color: #b792ff;
        text-transform: uppercase;
        margin-top: 0.5rem;
      }

      /* Email signup */
      .signup-container {
        margin: 3rem 0 1rem 0;
        position: relative;
      }

      .signup-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(10, 10, 10, 0.4);
        backdrop-filter: blur(2px);
        -webkit-backdrop-filter: blur(2px);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10;
        border-radius: 10px;
      }

      .signup-overlay h2 {
        color: #9b4dff;
        font-size: 2rem;
        text-transform: uppercase;
        letter-spacing: 0.3em;
        text-shadow:
          0 0 20px rgba(155, 77, 255, 0.8),
          0 0 30px rgba(255, 255, 255, 0.2);
        animation: pulse 2s ease-in-out infinite;
        margin-bottom: 1rem;
      }

      .signup-overlay p {
        color: #b792ff;
        font-size: 0.9rem;
        max-width: 500px;
        text-align: center;
        line-height: 1.6;
        white-space: normal;
      }

      .signup-overlay a {
        color: #fff;
        text-decoration: underline;
      }

      .signup-form {
        display: flex;
        gap: 1rem;
        justify-content: center;
        flex-wrap: wrap;
      }

      .email-input {
        padding: 1rem 1.5rem;
        font-size: 1rem;
        background: rgba(255, 255, 255, 0.1);
        border: 2px solid #9b4dff;
        border-radius: 50px;
        color: #fff;
        width: 300px;
        max-width: 100%;
        transition: all 0.3s;
      }

      .email-input::placeholder {
        color: rgba(255, 255, 255, 0.5);
      }

      .email-input:focus {
        outline: none;
        background: rgba(255, 255, 255, 0.2);
        box-shadow: 0 0 20px rgba(155, 77, 255, 0.5);
      }

      .notify-btn {
        padding: 1rem 2rem;
        font-size: 1rem;
        background: linear-gradient(45deg, #9b4dff, #ff4d4d);
        border: none;
        border-radius: 50px;
        color: #fff;
        cursor: pointer;
        transition: all 0.3s;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        font-weight: bold;
      }

      .notify-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 30px rgba(155, 77, 255, 0.5);
      }

      /* Social links */
      .social-links {
        display: flex;
        justify-content: center;
        gap: 2rem;
        margin-top: 3rem;
      }

      .social-link {
        color: #b792ff;
        text-decoration: none;
        font-size: 1.5rem;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .social-link:hover {
        color: #fff;
        transform: translateY(-3px);
        text-shadow: 0 0 10px #9b4dff;
      }

      .social-link.coming-soon-link {
        position: relative;
      }

      .social-link.coming-soon-link::after {
        content: 'Coming Soon';
        position: absolute;
        top: -30px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(155, 77, 255, 0.9);
        color: #fff;
        padding: 5px 10px;
        border-radius: 5px;
        font-size: 0.8rem;
        white-space: nowrap;
        opacity: 0;
        transition: opacity 0.3s;
        pointer-events: none;
      }

      .social-link.coming-soon-link:hover::after {
        opacity: 1;
      }

      /* Footer */
      .footer {
        margin-top: 4rem;
        padding: 2rem 0;
        color: #666;
        font-size: 0.9rem;
        text-align: center;
      }

      /* Modal animations */
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes modalSlideIn {
        from {
          opacity: 0;
          transform: scale(0.9) translateY(20px);
        }
        to {
          opacity: 1;
          transform: scale(1) translateY(0);
        }
      }

      @keyframes fadeInText {
        from {
          opacity: 0;
        }
        to {
          opacity: 0.8;
        }
      }

      /* Mobile responsive */
      @media (max-width: 640px) {
        .countdown {
          gap: 0.25rem;
        }

        .time-block {
          min-width: 60px;
          padding: 0.4rem 0.3rem;
        }

        .time-value {
          font-size: 1.5rem;
        }

        .time-label {
          font-size: 0.65rem;
          margin-top: 0.2rem;
        }

        .countdown-container {
          padding: 1.5rem 1rem;
        }

        .signup-overlay p {
          white-space: normal;
          padding: 0 1rem;
        }

        .email-input {
          width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <!-- 背景パーティクル -->
    <div class="bg-particles" id="particles"></div>

    <!-- メインコンテンツ -->
    <div class="container">
      <div class="logo-container">
        <img src="apple-touch-icon.svg" alt="Monster Preview" class="monster-preview" id="monsterImage" />
        <h1>The Mythical Cursed-Nightmare</h1>
        <p class="tagline">Something dark is awakening...</p>
      </div>

      <!-- カウントダウン -->
      <div class="countdown-container">
        <div class="countdown-label">Countdown to Pre-launch</div>
        <div style="text-align: center; margin-top: -0.5rem; margin-bottom: 1rem">
          <span style="color: #b792ff; font-size: 0.85rem"> Pre-launch: Sep 1, 2025 | Main Launch: Oct 1, 2025 </span>
        </div>
        <div class="countdown" id="countdown">
          <div class="time-block">
            <div class="time-value" id="days">00</div>
            <div class="time-label">Days</div>
          </div>
          <div class="time-block">
            <div class="time-value" id="hours">00</div>
            <div class="time-label">Hours</div>
          </div>
          <div class="time-block">
            <div class="time-value" id="minutes">00</div>
            <div class="time-label">Minutes</div>
          </div>
          <div class="time-block">
            <div class="time-value" id="seconds">00</div>
            <div class="time-label">Seconds</div>
          </div>
        </div>
        <!-- Nightmare Message -->
        <div style="text-align: center; margin-top: 1.5rem">
          <p
            style="font-style: italic; color: #ff4d4d; font-size: 1.1rem; text-shadow: 0 0 10px rgba(255, 77, 77, 0.5)"
          >
            The nightmare is about to begin...
          </p>
        </div>
      </div>

      <!-- Story Link -->
      <div id="storyLink" style="text-align: center; margin-top: 2rem">
        <a
          href="story.html"
          style="
            display: inline-block;
            padding: 0.8rem 2rem;
            background: linear-gradient(45deg, #9b4dff, #ff4d4d);
            border-radius: 50px;
            color: #fff;
            text-decoration: none;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            transition: all 0.3s;
            margin-right: 1rem;
          "
          onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 10px 30px rgba(155, 77, 255, 0.5)'"
          onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'"
        >
          Hear the Chronicler's Tale →
        </a>
      </div>

      <!-- Campaign Button -->
      <div style="text-align: center; margin-top: 15px">
        <a
          href="campaign.html"
          style="
            display: inline-block;
            padding: 0.8rem 2rem;
            background: linear-gradient(45deg, #9b4dff, #ff4d4d);
            border-radius: 50px;
            color: #fff;
            text-decoration: none;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            transition: all 0.3s;
            margin-right: 1rem;
          "
          onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 10px 30px rgba(155, 77, 255, 0.5)'"
          onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'"
        >
          Campaign →
        </a>
      </div>

      <!-- Summon Button -->
      <div class="signup-container">
        <div class="signup-overlay">
          <div>
            <h2>Coming Soon</h2>
            <p>
              Follow us on <a href="https://x.com/mythOfTragedy" target="_blank">X</a>
              to be notified when the tragedy begins.
            </p>
          </div>
        </div>
        <div style="text-align: center">
          <a
            href="summon.html"
            class="notify-btn"
            style="
              display: inline-block;
              text-decoration: none;
              padding: 1rem 2.5rem;
              background: linear-gradient(45deg, #9b4dff, #ff4d4d);
              border: none;
              border-radius: 50px;
              color: #fff;
              font-size: 1.1rem;
              text-transform: uppercase;
              letter-spacing: 0.1em;
              transition: all 0.3s;
              cursor: pointer;
              font-weight: bold;
            "
            onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 15px 40px rgba(155, 77, 255, 0.5)'"
            onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'"
          >
            Something happens?
          </a>
        </div>
        <div style="margin-top: 1.5rem; text-align: center">
          <p style="color: #b792ff; font-size: 0.9rem; margin-bottom: 0.5rem">
            ⚠️ MetaMask wallet required • Connected to Polygon
          </p>
          <p style="font-size: 0.85rem">
            <a href="https://metamask.io" target="_blank" style="color: #9b4dff; text-decoration: underline">
              Get MetaMask →
            </a>
          </p>
        </div>
      </div>

      <!-- Social Links -->
      <div class="social-links" id="socialLinks">
        <!-- Social links will be loaded dynamically -->
      </div>

      <!-- Manifest Link -->
      <div style="text-align: center; margin-top: 3rem; margin-bottom: 2rem">
        <a
          href="manifest.html"
          style="
            display: inline-block;
            padding: 0.8rem 2rem;
            background: linear-gradient(45deg, #9b4dff, #ff4d4d);
            border-radius: 50px;
            color: #fff;
            text-decoration: none;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            transition: all 0.3s;
          "
          onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 10px 30px rgba(155, 77, 255, 0.5)'"
          onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'"
        >
          MANIFESTO
        </a>
      </div>
    </div>

    <div class="footer">© 2025 The Mythical Cursed-Nightmare</div>

    <!-- Import MetaMask modal functionality -->
    <script src="js/ui/metamask-modal-translations.js"></script>
    <script src="js/ui/metamask-modal.js"></script>
    
    <!-- Import Settings Loader -->
    <script src="js/config/settings-loader.js"></script>
    
    <script>
      // パーティクル生成
      function createParticles() {
        const container = document.getElementById('particles');
        const particleCount = 50;

        for (let i = 0; i < particleCount; i++) {
          const particle = document.createElement('div');
          particle.className = 'particle';
          particle.style.left = Math.random() * 100 + '%';
          particle.style.width = Math.random() * 4 + 2 + 'px';
          particle.style.height = particle.style.width;
          particle.style.animationDelay = Math.random() * 15 + 's';
          particle.style.animationDuration = Math.random() * 10 + 15 + 's';
          container.appendChild(particle);
        }
      }

      // URLパラメータチェック（隠し機能）
      let watchwordChecked = false;
      let hasValidWatchword = false;
      // LocalStorageから試行回数を取得、なければ10から開始
      let attemptCount = parseInt(localStorage.getItem('attemptCount') || '10');

      function checkWatchword() {
        // 一度だけチェック
        if (!watchwordChecked) {
          watchwordChecked = true;

          const urlParams = new URLSearchParams(window.location.search);
          const watchword = urlParams.get('watchword');

          // Hahaha! You really thought you could find the secret by reading the source?
          // Nice try, script kiddie. The real magic isn't here.
          // BTW, you've been cursed for snooping around. Enjoy the nightmares! 👻
          function customDecrypt(code) {
            // This totally decrypts something important... or does it? 😈
            return code
              .split('-')
              .map((n) => String.fromCharCode(n - 1))
              .join('');
          }

          // Super secret encrypted password (definitely not 'password123' wink wink)
          const secretWord = customDecrypt('116-112-118-109-99-112-118-111-101');

          // Check for reset phrase - from Robert Johnson's crossroads legend
          const resetPhrase = 'crossroads';
          const isResetPhrase = watchword && watchword.toLowerCase() === resetPhrase.toLowerCase();

          // Handle incorrect watchword (including reset phrase)
          if (watchword && watchword !== secretWord) {
            // Don't decrease count for reset phrase
            if (!isResetPhrase) {
              attemptCount--; // 試行回数を減らす
              console.log(
                `%c❌ Wrong watchword: "${watchword}" (${attemptCount} attempts remaining)`,
                'color: #ff4d4d; font-size: 16px; font-weight: bold;'
              );
            }

            // Use the same WARNING modal as correct watchword
            const modal = document.createElement('div');
            modal.style.cssText = `
                        position: fixed;
                        top: 0;
                        left: 0;
                        right: 0;
                        bottom: 0;
                        background: rgba(0, 0, 0, 0.5);
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        z-index: 99999;
                        animation: fadeIn 0.3s;
                    `;

            const modalContent = document.createElement('div');
            modalContent.style.cssText = `
                        background: linear-gradient(180deg, #1a0a2a 0%, #0a0a0a 100%);
                        border: 2px solid #9b4dff;
                        border-radius: 20px;
                        padding: 40px;
                        text-align: center;
                        max-width: 500px;
                        box-shadow: 0 0 50px rgba(155, 77, 255, 0.5);
                    `;

            modalContent.innerHTML = `
                        <h2 style="color: #ff4d4d; font-size: 2em; margin-bottom: 20px; text-shadow: 0 0 20px rgba(255, 77, 77, 0.8);">
                            ⚠️ WARNING ⚠️
                        </h2>
                        <p style="color: #e9d5ff; font-size: 1.2em; margin-bottom: 15px; line-height: 1.6;">
                            You are about to break the ancient seal...
                        </p>
                        <p style="color: #b792ff; font-size: 1.1em; margin-bottom: 30px; font-style: italic;">
                            There is no turning back once the curse is unleashed.
                        </p>
                        <div style="display: flex; gap: 20px; justify-content: center;">
                            <button id="proceedBtn" style="
                                background: linear-gradient(45deg, #9b4dff, #ff4d4d);
                                color: white;
                                border: none;
                                padding: 15px 30px;
                                font-size: 1.1em;
                                border-radius: 50px;
                                cursor: pointer;
                                font-weight: bold;
                                transition: all 0.3s;
                            ">Break the Seal</button>
                            <button id="cancelBtn" style="
                                background: transparent;
                                color: #4dff4d;
                                border: 2px solid #4dff4d;
                                padding: 15px 30px;
                                font-size: 1.1em;
                                border-radius: 50px;
                                cursor: pointer;
                                transition: all 0.3s;
                            ">Turn Back</button>
                        </div>
                    `;

            modal.appendChild(modalContent);
            document.body.appendChild(modal);

            // Break the Seal button - check if it's reset phrase
            document.getElementById('proceedBtn').onclick = async () => {
              // Check if this is the reset phrase
              if (isResetPhrase) {
                console.log('%c🔥 Crossroads deal initiated!', 'color: #ff4d4d; font-size: 20px; font-weight: bold;');

                // Reset attempts
                localStorage.removeItem('attemptCount');
                attemptCount = 10;

                // Play voice message with Boing voice
                if ('speechSynthesis' in window) {
                  window.speechSynthesis.cancel();
                  const msg = new SpeechSynthesisUtterance();
                  msg.text =
                    'OK Robert. Your soul is mine now. In exchange, I grant you one more chance. Use it wisely.';
                  msg.lang = 'en-US';
                  msg.rate = 1.0; // Standard speed
                  msg.pitch = 1.0; // Standard pitch
                  msg.volume = 1.0;

                  const initializeVoices = () => {
                    return new Promise((resolve) => {
                      let voices = window.speechSynthesis.getVoices();

                      if (voices.length > 0) {
                        resolve(voices);
                      } else {
                        window.speechSynthesis.onvoiceschanged = () => {
                          voices = window.speechSynthesis.getVoices();
                          resolve(voices);
                        };

                        const dummy = new SpeechSynthesisUtterance('');
                        window.speechSynthesis.speak(dummy);
                        window.speechSynthesis.cancel();

                        setTimeout(() => {
                          voices = window.speechSynthesis.getVoices();
                          if (voices.length > 0) {
                            resolve(voices);
                          }
                        }, 100);
                      }
                    });
                  };

                  const voices = await initializeVoices();

                  // Prioritize Boing voice
                  let selectedVoice = voices.find((v) => v.name.toLowerCase().includes('boing'));

                  // Fallback voices if Boing not available
                  if (!selectedVoice) {
                    selectedVoice = voices.find((v) => v.name.toLowerCase().includes('bahh'));
                  }

                  if (!selectedVoice) {
                    selectedVoice = voices.find((v) => v.name.toLowerCase().includes('grandpa'));
                  }

                  if (!selectedVoice) {
                    selectedVoice =
                      voices.find((v) => v.lang === 'en-US') || voices.find((v) => v.lang.startsWith('en'));
                  }

                  if (selectedVoice) {
                    msg.voice = selectedVoice;
                  }

                  window.speechSynthesis.speak(msg);
                }

                // Close current modal
                modal.remove();

                // Show soul contract modal
                setTimeout(() => {
                  const contractModal = document.createElement('div');
                  contractModal.style.cssText = `
                                    position: fixed;
                                    top: 0;
                                    left: 0;
                                    right: 0;
                                    bottom: 0;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    z-index: 99999;
                                    animation: fadeIn 0.5s ease-out;
                                `;

                  // Add semi-transparent background
                  const modalBg = document.createElement('div');
                  modalBg.style.cssText = `
                                    position: absolute;
                                    top: 0;
                                    left: 0;
                                    right: 0;
                                    bottom: 0;
                                    background: rgba(0, 0, 0, 0.7);
                                `;

                  const contractContent = document.createElement('div');
                  contractContent.style.cssText = `
                                    background: linear-gradient(180deg, #2a0a3a 0%, #0a0a0a 100%);
                                    border: 2px solid #9b4dff;
                                    border-radius: 20px;
                                    padding: 40px;
                                    text-align: center;
                                    max-width: 400px;
                                    box-shadow: 0 0 50px rgba(155, 77, 255, 0.5);
                                    animation: modalSlideIn 0.5s ease-out;
                                    position: relative;
                                    z-index: 10;
                                `;

                  contractContent.innerHTML = `
                                    <h2 style="color: #9b4dff; font-size: 1.8em; margin-bottom: 20px; text-shadow: 0 0 20px rgba(155, 77, 255, 0.8);">
                                        Soul Contract
                                    </h2>
                                    <p style="color: #e9d5ff; font-size: 1.1em; margin-bottom: 25px; line-height: 1.6;">
                                        OK Robert.<br>
                                        Your soul is mine now.<br>
                                        In exchange, I grant you one more chance.<br>
                                        Use it wisely.
                                    </p>
                                    <p style="color: #999; font-size: 0.9em; margin-bottom: 25px; font-style: italic;">
                                        Attempts reset to 10
                                    </p>
                                    <input type="text" id="contractInput" placeholder="Enter the watchword" style="
                                        width: 100%;
                                        padding: 12px 20px;
                                        font-size: 1rem;
                                        background: rgba(255, 255, 255, 0.1);
                                        border: 2px solid #9b4dff;
                                        border-radius: 50px;
                                        color: #fff;
                                        margin-bottom: 20px;
                                        transition: all 0.3s;
                                        outline: none;
                                    ">
                                    <div style="display: flex; gap: 15px; justify-content: center;">
                                        <button id="contractTryBtn" style="
                                            background: linear-gradient(45deg, #9b4dff, #ff4d4d);
                                            color: white;
                                            border: none;
                                            padding: 12px 25px;
                                            font-size: 1em;
                                            border-radius: 50px;
                                            cursor: pointer;
                                            font-weight: bold;
                                            transition: all 0.3s;
                                        ">Try Again</button>
                                        <button id="contractCancelBtn" style="
                                            background: transparent;
                                            color: #999;
                                            border: 2px solid #666;
                                            padding: 12px 25px;
                                            font-size: 1em;
                                            border-radius: 50px;
                                            cursor: pointer;
                                            transition: all 0.3s;
                                        ">Cancel</button>
                                    </div>
                                `;

                  // Add background "10" text
                  const bgText = document.createElement('div');
                  bgText.style.cssText = `
                                    position: absolute;
                                    top: 50%;
                                    left: 50%;
                                    transform: translate(-50%, -50%);
                                    font-family: Impact, Arial Black, sans-serif;
                                    font-size: 250px;
                                    font-weight: 900;
                                    color: #9b4dff;
                                    opacity: 0.8;
                                    user-select: none;
                                    pointer-events: none;
                                    z-index: 5;
                                    animation: fadeInText 0.8s ease-out;
                                `;
                  bgText.textContent = '10';

                  contractModal.appendChild(modalBg);
                  contractModal.appendChild(bgText);
                  contractModal.appendChild(contractContent);
                  document.body.appendChild(contractModal);

                  // Focus on input
                  document.getElementById('contractInput').focus();

                  // Handle enter key
                  document.getElementById('contractInput').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                      document.getElementById('contractTryBtn').click();
                    }
                  });

                  // Try Again button
                  document.getElementById('contractTryBtn').onclick = () => {
                    const newWatchword = document.getElementById('contractInput').value;
                    if (newWatchword) {
                      // Store the reset attempt count
                      localStorage.setItem('attemptCount', '10');
                      // Redirect with new watchword
                      window.location.href = `${window.location.pathname}?watchword=${encodeURIComponent(newWatchword)}`;
                    }
                  };

                  // Cancel button
                  document.getElementById('contractCancelBtn').onclick = () => {
                    contractModal.remove();
                    window.location.href = window.location.pathname;
                  };

                  // Click outside to close
                  contractModal.addEventListener('click', (e) => {
                    if (e.target === contractModal || e.target === modalBg) {
                      contractModal.remove();
                      window.location.href = window.location.pathname;
                    }
                  });
                }, 500); // Show after 500ms delay

                return; // Don't show re-entry modal
              }

              // Normal wrong watchword handling
              console.log(
                '%c🔴 Break the Seal clicked (wrong watchword)!',
                'color: #ff4d4d; font-size: 16px; font-weight: bold;'
              );

              if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
                const msg = new SpeechSynthesisUtterance();
                // Different message for wrong watchword (without "Access denied")
                let messageText = `"${watchword}" is not the watchword. The seal remains unbroken. You are not worthy, foolish mortal.`;

                // Add remaining attempts warning for 3 or fewer attempts
                if (attemptCount <= 3 && attemptCount > 0) {
                  messageText += ` You have ${attemptCount} ${attemptCount === 1 ? 'chance' : 'chances'} left.`;
                }

                msg.text = messageText;
                msg.lang = 'en-US';
                msg.rate = 0.9;
                msg.pitch = 0.5;
                msg.volume = 1.0;

                const initializeVoices = () => {
                  return new Promise((resolve) => {
                    let voices = window.speechSynthesis.getVoices();

                    if (voices.length > 0) {
                      resolve(voices);
                    } else {
                      window.speechSynthesis.onvoiceschanged = () => {
                        voices = window.speechSynthesis.getVoices();
                        resolve(voices);
                      };

                      const dummy = new SpeechSynthesisUtterance('');
                      window.speechSynthesis.speak(dummy);
                      window.speechSynthesis.cancel();

                      setTimeout(() => {
                        voices = window.speechSynthesis.getVoices();
                        if (voices.length > 0) {
                          resolve(voices);
                        }
                      }, 100);
                    }
                  });
                };

                const voices = await initializeVoices();
                let selectedVoice = voices.find((v) => v.name.toLowerCase().includes('boing'));

                if (!selectedVoice) {
                  selectedVoice = voices.find((v) => v.name.toLowerCase().includes('bahh'));
                }

                if (!selectedVoice) {
                  selectedVoice = voices.find(
                    (v) => v.name.toLowerCase().includes('grandpa') || v.name === 'Grandpa (English (United States))'
                  );
                }

                if (!selectedVoice) {
                  selectedVoice = voices.find(
                    (v) =>
                      v.lang.includes('en') &&
                      (v.name.toLowerCase().includes('bells') ||
                        v.name.toLowerCase().includes('zarvox') ||
                        v.name.toLowerCase().includes('whisper') ||
                        v.name.toLowerCase().includes('bad') ||
                        v.name.toLowerCase().includes('bubbles'))
                  );
                }

                if (!selectedVoice) {
                  selectedVoice = voices.find((v) => v.lang === 'en-US') || voices.find((v) => v.lang.startsWith('en'));
                }

                if (selectedVoice) {
                  msg.voice = selectedVoice;
                }

                window.speechSynthesis.speak(msg);
              }

              // Close current modal
              modal.remove();

              // Show re-entry modal after a short delay
              setTimeout(() => {
                // Check if attempts are exhausted
                if (attemptCount <= 0) {
                  // Show game over modal
                  const gameOverModal = document.createElement('div');
                  gameOverModal.style.cssText = `
                                    position: fixed;
                                    top: 0;
                                    left: 0;
                                    right: 0;
                                    bottom: 0;
                                    background: rgba(0, 0, 0, 0.9);
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    z-index: 99999;
                                    animation: fadeIn 0.5s ease-out;
                                `;

                  const gameOverContent = document.createElement('div');
                  gameOverContent.style.cssText = `
                                    background: linear-gradient(180deg, #000000 0%, #1a0000 100%);
                                    border: 2px solid #8b0000;
                                    border-radius: 20px;
                                    padding: 40px;
                                    text-align: center;
                                    max-width: 400px;
                                    box-shadow: 0 0 50px rgba(139, 0, 0, 0.8);
                                    animation: modalSlideIn 0.5s ease-out;
                                `;

                  gameOverContent.innerHTML = `
                                    <h2 style="color: #8b0000; font-size: 2em; margin-bottom: 20px; text-shadow: 0 0 20px rgba(139, 0, 0, 0.8);">
                                        LOCKED OUT
                                    </h2>
                                    <p style="color: #ff4d4d; font-size: 1.2em; margin-bottom: 25px; line-height: 1.6;">
                                        You have exhausted all attempts.<br>
                                        The seal remains forever closed to you.
                                    </p>
                                    <p style="color: #666; font-size: 0.9em; font-style: italic;">
                                        Your soul has been marked as unworthy.
                                    </p>
                                    <button id="acceptFateBtn" style="
                                        background: #8b0000;
                                        color: white;
                                        border: none;
                                        padding: 12px 30px;
                                        font-size: 1em;
                                        border-radius: 50px;
                                        cursor: pointer;
                                        font-weight: bold;
                                        transition: all 0.3s;
                                        margin-top: 20px;
                                    ">Accept Your Fate</button>
                                `;

                  gameOverModal.appendChild(gameOverContent);
                  document.body.appendChild(gameOverModal);

                  // Read the locked out message
                  if ('speechSynthesis' in window) {
                    window.speechSynthesis.cancel();
                    const msg = new SpeechSynthesisUtterance();
                    msg.text =
                      'Locked out. You have exhausted all attempts. The seal remains forever closed to you. Your soul has been marked as unworthy.';
                    msg.lang = 'en-US';
                    msg.rate = 0.8;
                    msg.pitch = 0.4;
                    msg.volume = 1.0;

                    // Initialize voices
                    const initializeVoices = () => {
                      return new Promise((resolve) => {
                        let voices = window.speechSynthesis.getVoices();

                        if (voices.length > 0) {
                          resolve(voices);
                        } else {
                          window.speechSynthesis.onvoiceschanged = () => {
                            voices = window.speechSynthesis.getVoices();
                            resolve(voices);
                          };

                          const dummy = new SpeechSynthesisUtterance('');
                          window.speechSynthesis.speak(dummy);
                          window.speechSynthesis.cancel();

                          setTimeout(() => {
                            voices = window.speechSynthesis.getVoices();
                            if (voices.length > 0) {
                              resolve(voices);
                            }
                          }, 100);
                        }
                      });
                    };

                    initializeVoices().then((voices) => {
                      // Try to find special voice
                      let selectedVoice = voices.find((v) => v.name.toLowerCase().includes('boing'));

                      if (!selectedVoice) {
                        selectedVoice = voices.find((v) => v.name.toLowerCase().includes('bahh'));
                      }

                      if (!selectedVoice) {
                        selectedVoice = voices.find(
                          (v) =>
                            v.name.toLowerCase().includes('grandpa') || v.name === 'Grandpa (English (United States))'
                        );
                      }

                      if (!selectedVoice) {
                        selectedVoice = voices.find(
                          (v) =>
                            v.lang.includes('en') &&
                            (v.name.toLowerCase().includes('bells') ||
                              v.name.toLowerCase().includes('zarvox') ||
                              v.name.toLowerCase().includes('whisper') ||
                              v.name.toLowerCase().includes('bad') ||
                              v.name.toLowerCase().includes('bubbles'))
                        );
                      }

                      if (!selectedVoice) {
                        selectedVoice =
                          voices.find((v) => v.lang === 'en-US') || voices.find((v) => v.lang.startsWith('en'));
                      }

                      if (selectedVoice) {
                        msg.voice = selectedVoice;
                      }

                      window.speechSynthesis.speak(msg);
                    });
                  }

                  // Accept Fate button
                  document.getElementById('acceptFateBtn').onclick = () => {
                    localStorage.removeItem('attemptCount');
                    window.location.href = window.location.pathname;
                  };

                  return; // Don't show the retry modal
                }

                const reentryModal = document.createElement('div');
                reentryModal.style.cssText = `
                                position: fixed;
                                top: 0;
                                left: 0;
                                right: 0;
                                bottom: 0;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                z-index: 99999;
                                animation: fadeIn 0.5s ease-out;
                            `;

                // Add semi-transparent background as separate layer
                const modalBg = document.createElement('div');
                modalBg.style.cssText = `
                                position: absolute;
                                top: 0;
                                left: 0;
                                right: 0;
                                bottom: 0;
                                background: rgba(0, 0, 0, 0.5);
                            `;

                const reentryContent = document.createElement('div');
                reentryContent.style.cssText = `
                                background: linear-gradient(180deg, rgba(26, 10, 42, 0.9) 0%, rgba(10, 10, 10, 0.9) 100%);
                                border: 2px solid #ff4d4d;
                                border-radius: 20px;
                                padding: 40px;
                                text-align: center;
                                max-width: 400px;
                                box-shadow: 0 0 50px rgba(255, 77, 77, 0.5);
                                animation: modalSlideIn 0.5s ease-out;
                                position: relative;
                                z-index: 10;
                            `;

                reentryContent.innerHTML = `
                                <h2 style="color: #ff4d4d; font-size: 1.8em; margin-bottom: 20px; text-shadow: 0 0 20px rgba(255, 77, 77, 0.8);">
                                    Access Denied
                                </h2>
                                <p style="color: #b792ff; font-size: 1em; margin-bottom: 25px; line-height: 1.6;">
                                    "${watchword}" is not the watchword.<br>
                                    The seal remains unbroken.<br>
                                    You are not worthy, foolish mortal.
                                </p>
                                <input type="text" id="reentryInput" placeholder="Enter the watchword" style="
                                    width: 100%;
                                    padding: 12px 20px;
                                    font-size: 1rem;
                                    background: rgba(255, 255, 255, 0.1);
                                    border: 2px solid #9b4dff;
                                    border-radius: 50px;
                                    color: #fff;
                                    margin-bottom: 20px;
                                    transition: all 0.3s;
                                    outline: none;
                                ">
                                <div style="display: flex; gap: 15px; justify-content: center;">
                                    <button id="retryBtn" style="
                                        background: linear-gradient(45deg, #9b4dff, #ff4d4d);
                                        color: white;
                                        border: none;
                                        padding: 12px 25px;
                                        font-size: 1em;
                                        border-radius: 50px;
                                        cursor: pointer;
                                        font-weight: bold;
                                        transition: all 0.3s;
                                    ">Try Again</button>
                                    <button id="giveUpBtn" style="
                                        background: transparent;
                                        color: #999;
                                        border: 2px solid #666;
                                        padding: 12px 25px;
                                        font-size: 1em;
                                        border-radius: 50px;
                                        cursor: pointer;
                                        transition: all 0.3s;
                                    ">Give Up</button>
                                </div>
                            `;

                // Add background text "10"
                const bgText = document.createElement('div');
                bgText.style.cssText = `
                                position: absolute;
                                top: 50%;
                                left: 50%;
                                transform: translate(-50%, -50%);
                                font-family: Impact, Arial Black, sans-serif;
                                font-size: 250px;
                                font-weight: 900;
                                color: #ff4d4d;
                                opacity: 0.8;
                                user-select: none;
                                pointer-events: none;
                                z-index: 5;
                                animation: fadeInText 0.8s ease-out;
                            `;
                bgText.textContent = attemptCount.toString();

                reentryModal.appendChild(modalBg);
                reentryModal.appendChild(bgText);
                reentryModal.appendChild(reentryContent);
                document.body.appendChild(reentryModal);

                // Focus on input
                document.getElementById('reentryInput').focus();

                // Handle enter key
                document.getElementById('reentryInput').addEventListener('keypress', (e) => {
                  if (e.key === 'Enter') {
                    document.getElementById('retryBtn').click();
                  }
                });

                // Try Again button
                document.getElementById('retryBtn').onclick = () => {
                  const newWatchword = document.getElementById('reentryInput').value;
                  if (newWatchword) {
                    // Store attempt count in localStorage to persist across redirects
                    localStorage.setItem('attemptCount', attemptCount.toString());
                    // Redirect with new watchword
                    window.location.href = `${window.location.pathname}?watchword=${encodeURIComponent(newWatchword)}`;
                  }
                };

                // Give Up button
                document.getElementById('giveUpBtn').onclick = () => {
                  // Reset attempt count when giving up
                  localStorage.removeItem('attemptCount');
                  reentryModal.remove();
                  window.location.href = window.location.pathname;
                };

                // Click outside to close
                reentryModal.addEventListener('click', (e) => {
                  if (e.target === reentryModal) {
                    // Reset attempt count when clicking outside
                    localStorage.removeItem('attemptCount');
                    reentryModal.remove();
                    window.location.href = window.location.pathname;
                  }
                });
              }, 500); // Show after 500ms delay

              console.log(
                '%c💀 The seal remains unbroken. Wrong watchword!',
                'color: #ff4d4d; font-size: 18px; font-weight: bold;'
              );
            };

            // Turn Back button
            document.getElementById('cancelBtn').onclick = () => {
              modal.remove();
              console.log('%cWise choice... But the watchword was still wrong.', 'color: #4dff4d; font-size: 16px;');
              window.location.href = window.location.pathname;
            };

            // Click outside to close
            modal.addEventListener('click', (e) => {
              if (e.target === modal) {
                modal.remove();
                console.log('%cThe watchword was wrong anyway...', 'color: #ff4d4d; font-size: 16px;');
                window.location.href = window.location.pathname;
              }
            });

            return false; // Don't process further
          }

          if (watchword === secretWord) {
            hasValidWatchword = true;
            // Clear attempt count on successful login
            localStorage.removeItem('attemptCount');

            console.log('%c🔓 Watchword accepted!', 'color: #4dff4d; font-size: 16px; font-weight: bold;');

            // カスタムモーダルを作成
            const modal = document.createElement('div');
            modal.style.cssText = `
                        position: fixed;
                        top: 0;
                        left: 0;
                        right: 0;
                        bottom: 0;
                        background: rgba(0, 0, 0, 0.5);
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        z-index: 99999;
                        animation: fadeIn 0.3s;
                    `;

            const modalContent = document.createElement('div');
            modalContent.style.cssText = `
                        background: linear-gradient(180deg, #1a0a2a 0%, #0a0a0a 100%);
                        border: 2px solid #9b4dff;
                        border-radius: 20px;
                        padding: 40px;
                        text-align: center;
                        max-width: 500px;
                        box-shadow: 0 0 50px rgba(155, 77, 255, 0.5);
                    `;

            modalContent.innerHTML = `
                        <h2 style="color: #ff4d4d; font-size: 2em; margin-bottom: 20px; text-shadow: 0 0 20px rgba(255, 77, 77, 0.8);">
                            ⚠️ WARNING ⚠️
                        </h2>
                        <p style="color: #e9d5ff; font-size: 1.2em; margin-bottom: 15px; line-height: 1.6;">
                            You are about to break the ancient seal...
                        </p>
                        <p style="color: #b792ff; font-size: 1.1em; margin-bottom: 30px; font-style: italic;">
                            There is no turning back once the curse is unleashed.
                        </p>
                        <div style="display: flex; gap: 20px; justify-content: center;">
                            <button id="proceedBtn" style="
                                background: linear-gradient(45deg, #9b4dff, #ff4d4d);
                                color: white;
                                border: none;
                                padding: 15px 30px;
                                font-size: 1.1em;
                                border-radius: 50px;
                                cursor: pointer;
                                font-weight: bold;
                                transition: all 0.3s;
                            ">Break the Seal</button>
                            <button id="cancelBtn" style="
                                background: transparent;
                                color: #4dff4d;
                                border: 2px solid #4dff4d;
                                padding: 15px 30px;
                                font-size: 1.1em;
                                border-radius: 50px;
                                cursor: pointer;
                                transition: all 0.3s;
                            ">Turn Back</button>
                        </div>
                    `;

            modal.appendChild(modalContent);
            document.body.appendChild(modal);

            // ボタンのイベントハンドラ（asyncにする）
            document.getElementById('proceedBtn').onclick = async () => {
              console.log('%c🔴 Break the Seal clicked!', 'color: #ff4d4d; font-size: 16px; font-weight: bold;');

              // ボタンクリックで音声を再生（speechkitの方法を参考に）
              if ('speechSynthesis' in window) {
                // 既存の音声をキャンセル
                window.speechSynthesis.cancel();

                // メッセージを作成
                const msg = new SpeechSynthesisUtterance();
                msg.text = 'Soul bound. The seal is broken. Welcome to the nightmare.';
                msg.lang = 'en-US'; // 言語を最初に設定
                msg.rate = 1.0; // 標準スピード
                msg.pitch = 0.7; // 少し低い声
                msg.volume = 1.0;

                // 声の初期化を確実にする
                const initializeVoices = () => {
                  return new Promise((resolve) => {
                    let voices = window.speechSynthesis.getVoices();

                    if (voices.length > 0) {
                      resolve(voices);
                    } else {
                      // voiceschangedイベントを待つ
                      window.speechSynthesis.onvoiceschanged = () => {
                        voices = window.speechSynthesis.getVoices();
                        resolve(voices);
                      };

                      // トリガーとして空のメッセージを再生
                      const dummy = new SpeechSynthesisUtterance('');
                      window.speechSynthesis.speak(dummy);
                      window.speechSynthesis.cancel();

                      // タイムアウト後も再試行
                      setTimeout(() => {
                        voices = window.speechSynthesis.getVoices();
                        if (voices.length > 0) {
                          resolve(voices);
                        }
                      }, 100);
                    }
                  });
                };

                // 音声を初期化して取得
                const voices = await initializeVoices();

                // Boing voiceを最優先で探す（妻推奨）
                let selectedVoice = voices.find((v) => v.name.toLowerCase().includes('boing'));

                // なければBahh（羊）
                if (!selectedVoice) {
                  selectedVoice = voices.find((v) => v.name.toLowerCase().includes('bahh'));
                }

                // なければGrandpa voice（macOSの場合）
                if (!selectedVoice) {
                  selectedVoice = voices.find(
                    (v) => v.name.toLowerCase().includes('grandpa') || v.name === 'Grandpa (English (United States))'
                  );
                }

                // なければ他の特殊音声を探す
                if (!selectedVoice) {
                  selectedVoice = voices.find(
                    (v) =>
                      v.lang.includes('en') &&
                      (v.name.toLowerCase().includes('bells') ||
                        v.name.toLowerCase().includes('zarvox') ||
                        v.name.toLowerCase().includes('whisper') ||
                        v.name.toLowerCase().includes('bad') ||
                        v.name.toLowerCase().includes('bubbles'))
                  );
                }

                // それでもなければデフォルトの英語音声
                if (!selectedVoice) {
                  selectedVoice = voices.find((v) => v.lang === 'en-US') || voices.find((v) => v.lang.startsWith('en'));
                }

                if (selectedVoice) {
                  msg.voice = selectedVoice;
                }

                // 音声を再生
                window.speechSynthesis.speak(msg);
              }

              // モーダルを削除
              modal.remove();

              // Coming Soonを解除
              const overlay = document.querySelector('.signup-overlay');
              if (overlay) {
                overlay.style.display = 'none';
              }

              // Removed mint link display - now using direct summon button

              // スタイル付きコンソール出力
              console.log(
                '%c🔮 You have stepped into forbidden territory%c...',
                'color: #9b4dff; font-size: 20px; font-weight: bold; text-shadow: 0 0 10px rgba(155, 77, 255, 0.8);',
                'color: #ff4d4d; font-size: 16px; font-style: italic;'
              );
              console.log('%c━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━', 'color: #9b4dff;');
              console.log(
                '%cSOULBOUND %c',
                'background: linear-gradient(45deg, #9b4dff, #ff4d4d); color: white; padding: 10px 20px; font-weight: bold; font-size: 65px;',
                'color: #4dff4d; font-size: 24px;'
              );
              console.log('%c There is no turning back', 'color: #ff6666; font-size: 14px; font-style: italic;');
              console.log('%c━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━', 'color: #9b4dff;');
              // 不吉な警告メッセージ
              setTimeout(() => {
                console.log(
                  '%c⚠️ WARNING ⚠️',
                  'background: #8b0000; color: #fff; padding: 10px 20px; font-size: 18px; font-weight: bold; border: 2px solid #ff0000; font-size:60px;'
                );
                console.log(
                  '%cThe barrier has been broken... The cursed state machine begins to awaken...',
                  'color: #ff6666; font-size: 14px; font-style: italic;'
                );
                console.log(
                  '%cThere is no escape from your fate now.',
                  'color: #ff4444; font-size: 14px; font-weight: bold;'
                );
                console.log(
                  '%cThe nightmare will find you when October comes...',
                  'color: #cc0000; font-size: 12px; font-style: italic; text-decoration: underline;'
                );
                console.log(
                  '%c🩸 Your soul is marked. 🩸',
                  'color: #8b0000; font-size: 16px; font-weight: bold; text-shadow: 0 0 10px rgba(139, 0, 0, 0.8);'
                );
                console.log('%c ', 'padding: 5px;');
                console.log(
                  '%cPrepare yourself and move forward.',
                  'background: #000000; color: #ffffff; padding: 15px 30px; font-size: 18px; font-weight: bold; font-style: italic; text-shadow: 0 0 15px rgba(255, 255, 255, 0.5);'
                );
              }, 3000); // 3秒後に表示
            };

            // キャンセルボタン
            document.getElementById('cancelBtn').onclick = () => {
              modal.remove();
              console.log('%cWise choice... You have been spared.', 'color: #4dff4d; font-size: 16px;');
              window.location.href = window.location.pathname;
            };

            // Escキーでも閉じる
            modal.addEventListener('click', (e) => {
              if (e.target === modal) {
                modal.remove();
                console.log('%cWise choice... You have been spared.', 'color: #4dff4d; font-size: 16px;');
                window.location.href = window.location.pathname;
              }
            });

            return true; // hasValidWatchword = trueの状態を維持
          }
        }
        return hasValidWatchword;
      }

      // カウントダウンタイマー
      function updateCountdown() {
        const mainLaunch = new Date('2025-10-01T00:00:00Z').getTime(); // 本公開: 2025年10月1日 00:00:00 GMT
        const preLaunch = new Date('2025-09-01T00:00:00Z').getTime(); // プレ公開: 2025年9月1日 00:00:00 GMT
        const now = new Date().getTime();
        const distance = mainLaunch - now;
        const preDistance = preLaunch - now;

        // 隠し合言葉チェック
        const hasWatchword = checkWatchword();

        // プレ公開日チェック（Coming Soon解除）
        if (preDistance <= 0 && !hasWatchword) {
          // 9月1日以降はComing Soonオーバーレイを非表示（合言葉がない場合のみ）
          const overlay = document.querySelector('.signup-overlay');
          if (overlay) {
            overlay.style.display = 'none';
          }
        }

        // カウントダウン表示の決定
        let targetDate = mainLaunch;
        let currentDistance = distance;

        // プレ公開前はプレ公開日までカウントダウン
        if (preDistance > 0) {
          targetDate = preLaunch;
          currentDistance = preDistance;
        }

        if (currentDistance > 0) {
          const days = Math.floor(currentDistance / (1000 * 60 * 60 * 24));
          const hours = Math.floor((currentDistance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
          const minutes = Math.floor((currentDistance % (1000 * 60 * 60)) / (1000 * 60));
          const seconds = Math.floor((currentDistance % (1000 * 60)) / 1000);

          document.getElementById('days').textContent = String(days).padStart(2, '0');
          document.getElementById('hours').textContent = String(hours).padStart(2, '0');
          document.getElementById('minutes').textContent = String(minutes).padStart(2, '0');
          document.getElementById('seconds').textContent = String(seconds).padStart(2, '0');

          // カウントダウンラベルの更新
          if (preDistance > 0) {
            document.querySelector('.countdown-label').textContent = 'Countdown to Pre-launch';
          } else {
            document.querySelector('.countdown-label').textContent = 'Countdown to Main Launch';
          }
        } else {
          // 本公開後の表示
          if (distance <= 0) {
            document.querySelector('.countdown-label').textContent = 'The nightmare has begun...';
            document.getElementById('countdown').innerHTML = '<h2 style="color: #ff4d4d;">LIVE NOW</h2>';
          }
        }
      }

      // Removed wallet signup form handler - now using direct link to summon page

      // モンスター画像の切り替え
      function rotateMonsterImages() {
        const monsterImages = [
          'assets/monsters/demon.svg',
          'assets/monsters/frankenstein.svg',
          'assets/monsters/goblin.svg',
          'assets/monsters/mummy.svg',
          'assets/monsters/skeleton.svg',
          'assets/monsters/succubus.svg',
          'assets/monsters/vampire.svg',
          'assets/monsters/werewolf.svg',
          'assets/monsters/zombie.svg',
          'assets/monsters/question.svg',
        ];

        let currentIndex = 0;
        const monsterImg = document.getElementById('monsterImage');

        // revealアニメーションのタイミングに合わせて画像を切り替え
        monsterImg.addEventListener('animationiteration', () => {
          currentIndex = (currentIndex + 1) % monsterImages.length;
          monsterImg.src = monsterImages[currentIndex];
        });

        // 初期画像を設定
        monsterImg.src = monsterImages[0];
      }

      // 初期化
      createParticles();
      updateCountdown();
      setInterval(updateCountdown, 1000);
      checkBrowserAndShowMetaMaskWarning();
      rotateMonsterImages();
      
      // Load social links
      renderSocialLinks('socialLinks');
    </script>
  </body>
</html>
