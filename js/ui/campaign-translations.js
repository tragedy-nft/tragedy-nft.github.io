/**
 * Campaign-specific translations
 * Uses shared translations for common elements like wallet and network messages
 */

// Campaign-specific translations only
const campaignPageTranslations = {
  campaign: {
    title: {
      en: 'Transmitting Japanese Traditions with New Interpretations',
      ja: '新解釈による日本の伝統の発信',
      zh: '以新诠释传播日本传统',
      ko: '새로운 해석으로 일본 전통 전달',
      es: 'Transmitiendo Tradiciones Japonesas con Nuevas Interpretaciones',
      fr: 'Transmettre les Traditions Japonaises avec de Nouvelles Interprétations'
    },
    subtitle: {
      en: 'Redefining Traditional Events Through Blockchain Technology',
      ja: 'ブロックチェーン技術による伝統行事の再定義',
      zh: '通过区块链技术重新定义传统活动',
      ko: '블록체인 기술을 통한 전통 행사의 재정의',
      es: 'Redefiniendo Eventos Tradicionales a Través de la Tecnología Blockchain',
      fr: 'Redéfinir les Événements Traditionnels grâce à la Technologie Blockchain'
    },
    description: {
      en: 'In Japan, August brings Obon.<br />Ancestral spirits return to visit their families,<br />a tradition cherished since ancient times.<br /><br />During this sacred period in Japan,<br />the boundary between the world of the living and the dead grows thin.<br /><br />We have chosen this culturally significant time<br />to open the birth of "SOUL"<br />that will exist eternally on the blockchain.',
      ja: '日本では8月にお盆を迎えます。<br />先祖の霊が家族のもとに里帰りする、<br />古くから大切にされてきた伝統行事です。<br /><br />この神聖な期間、日本では<br />生者と死者の世界の境界が薄れます。<br /><br />私たちはこの文化的に重要な時期を選び、<br />ブロックチェーン上に永遠に存在し続ける<br />「魂:SOUL」の誕生を開放しました。',
      zh: '在日本，八月迎来盂兰盆节。<br />祖先的灵魂回到家人身边，<br />这是自古以来珍视的传统。<br /><br />在日本的这个神圣时期，<br />生者与死者世界的界限变得薄弱。<br /><br />我们选择了这个文化上重要的时刻<br />开启"灵魂:SOUL"的诞生<br />它将永远存在于区块链上。',
      ko: '일본에서는 8월에 오봉을 맞이합니다.<br />조상의 영혼이 가족을 방문하러 돌아오는,<br />고대부터 소중히 여겨온 전통 행사입니다.<br /><br />일본의 이 신성한 기간 동안<br />산 자와 죽은 자의 세계 사이의 경계가 얇아집니다.<br /><br />우리는 이 문화적으로 중요한 시기를 선택하여<br />블록체인에 영원히 존재할<br />"영혼:SOUL"의 탄생을 열었습니다.',
      es: 'En Japón, agosto trae Obon.<br />Los espíritus ancestrales regresan a visitar a sus familias,<br />una tradición apreciada desde tiempos antiguos.<br /><br />Durante este período sagrado en Japón,<br />el límite entre el mundo de los vivos y los muertos se vuelve delgado.<br /><br />Hemos elegido este momento culturalmente significativo<br />para abrir el nacimiento del "ALMA"<br />que existirá eternamente en la blockchain.',
      fr: 'Au Japon, août apporte Obon.<br />Les esprits ancestraux reviennent visiter leurs familles,<br />une tradition chérie depuis les temps anciens.<br /><br />Pendant cette période sacrée au Japon,<br />la frontière entre le monde des vivants et des morts s\'amincit.<br /><br />Nous avons choisi cette période culturellement significative<br />pour ouvrir la naissance de "L\'ÂME"<br />qui existera éternellement sur la blockchain.'
    },
    countdown: {
      en: 'Limited Cultural Access Opening | Free Mint Fee',
      ja: '期間限定の文化的アクセス開放 | mintFee無料',
      zh: '限时文化访问开放 | 免费铸造费',
      ko: '기간 한정 문화적 접근 개방 | 무료 민팅 수수료',
      es: 'Apertura de Acceso Cultural Limitado | Tarifa de Mint Gratis',
      fr: 'Ouverture d\'Accès Culturel Limité | Frais de Mint Gratuits'
    },
    features: {
      limited: {
        title: {
          en: 'Limited Time',
          ja: '期間限定',
          zh: '限时',
          ko: '기간 한정',
          es: 'Tiempo Limitado',
          fr: 'Durée Limitée'
        },
        desc: {
          en: 'Special TOKEN only available now',
          ja: '今しか手に入らない特別なTOKEN',
          zh: '仅在现在可获得的特殊TOKEN',
          ko: '지금만 얻을 수 있는 특별한 TOKEN',
          es: 'TOKEN especial disponible solo ahora',
          fr: 'TOKEN spécial disponible uniquement maintenant'
        }
      },
      free: {
        title: {
          en: 'Free Mint',
          ja: '無料ミント',
          zh: '免费铸造',
          ko: '무료 민팅',
          es: 'Mint Gratis',
          fr: 'Mint Gratuit'
        },
        desc: {
          en: 'No minting fees - pay only gas',
          ja: 'ミント手数料無料 - ガス代のみ',
          zh: '无铸造费 - 仅支付燃料费',
          ko: '민팅 수수료 없음 - 가스비만 지불',
          es: 'Sin tarifas de minteo - paga solo gas',
          fr: 'Pas de frais de mint - payez uniquement le gas'
        }
      },
      soulbound: {
        title: {
          en: 'SOUL BOUND',
          ja: 'SOUL BOUND',
          zh: '灵魂绑定',
          ko: 'SOUL BOUND',
          es: 'SOUL BOUND',
          fr: 'SOUL BOUND'
        },
        desc: {
          en: 'Non-transferable, forever yours',
          ja: '譲渡不可、永遠にあなたのもの',
          zh: '不可转让，永远属于你',
          ko: '양도 불가, 영원히 당신의 것',
          es: 'No transferible, tuyo para siempre',
          fr: 'Non transférable, à vous pour toujours'
        }
      },
      polygon: {
        desc: {
          en: 'Low gas fees on Polygon',
          ja: 'Polygonによる低いガス代',
          zh: 'Polygon上的低燃料费',
          ko: 'Polygon의 낮은 가스 수수료',
          es: 'Tarifas de gas bajas en Polygon',
          fr: 'Frais de gas faibles sur Polygon'
        }
      }
    },
    mint: {
      title: {
        en: 'Mint Your Free SBT',
        ja: '無料SBTをミント',
        zh: '铸造您的免费SBT',
        ko: '무료 SBT 민팅하기',
        es: 'Mintea tu SBT Gratis',
        fr: 'Mintez votre SBT Gratuit'
      },
      instruction: {
        en: 'Connect your wallet and click the button below to mint',
        ja: 'ウォレットを接続して、下のボタンをクリックしてミント',
        zh: '连接您的钱包并点击下面的按钮进行铸造',
        ko: '지갑을 연결하고 아래 버튼을 클릭하여 민팅하세요',
        es: 'Conecta tu billetera y haz clic en el botón de abajo para mintear',
        fr: 'Connectez votre portefeuille et cliquez sur le bouton ci-dessous pour minter'
      },
      button: {
        en: 'MINT NOW',
        ja: '今すぐミント',
        zh: '立即铸造',
        ko: '지금 민팅',
        es: 'MINTEAR AHORA',
        fr: 'MINTER MAINTENANT'
      }
    },
    contract: {
      title: {
        en: 'Contract Information',
        ja: 'コントラクト情報',
        zh: '合约信息',
        ko: '컨트랙트 정보',
        es: 'Información del Contrato',
        fr: 'Informations du Contrat'
      },
      network: {
        en: 'Network:',
        ja: 'ネットワーク：',
        zh: '网络：',
        ko: '네트워크:',
        es: 'Red:',
        fr: 'Réseau :'
      },
      address: {
        en: 'Contract:',
        ja: 'コントラクト：',
        zh: '合约：',
        ko: '컨트랙트:',
        es: 'Contrato:',
        fr: 'Contrat :'
      },
      type: {
        en: 'Token Type:',
        ja: 'トークンタイプ：',
        zh: '代币类型：',
        ko: '토큰 타입:',
        es: 'Tipo de Token:',
        fr: 'Type de Token :'
      },
      price: {
        en: 'Price:',
        ja: '価格：',
        zh: '价格：',
        ko: '가격:',
        es: 'Precio:',
        fr: 'Prix :'
      },
      priceValue: {
        en: 'FREE (Gas only)',
        ja: '無料（ガス代のみ）',
        zh: '免费（仅燃料费）',
        ko: '무료 (가스비만)',
        es: 'GRATIS (Solo gas)',
        fr: 'GRATUIT (Gas seulement)'
      }
    },
    alerts: {
      minting: {
        en: 'Minting...',
        ja: 'ミント中...',
        zh: '铸造中...',
        ko: '민팅 중...',
        es: 'Minteando...',
        fr: 'Mintage en cours...'
      },
      mintSuccess: {
        en: 'Successfully minted your SBT! Welcome to the community!',
        ja: 'SBTのミントに成功しました！コミュニティへようこそ！',
        zh: '成功铸造了您的SBT！欢迎加入社区！',
        ko: 'SBT 민팅에 성공했습니다! 커뮤니티에 오신 것을 환영합니다!',
        es: '¡Se minteó exitosamente tu SBT! ¡Bienvenido a la comunidad!',
        fr: 'Votre SBT a été minté avec succès ! Bienvenue dans la communauté !'
      },
      mintFailed: {
        en: 'Minting failed',
        ja: 'ミントに失敗しました',
        zh: '铸造失败',
        ko: '민팅 실패',
        es: 'El minteo falló',
        fr: 'Le mintage a échoué'
      },
      minted: {
        en: 'MINTED ✓',
        ja: 'ミント済み ✓',
        zh: '已铸造 ✓',
        ko: '민팅 완료 ✓',
        es: 'MINTEADO ✓',
        fr: 'MINTÉ ✓'
      }
    }
  }
};

// Initialize translation system
let translations = {};
let currentLanguage = localStorage.getItem('language') || 'en';

// Load translations when script loads
async function initTranslations() {
  // Load shared translations first
  if (typeof sharedTranslations !== 'undefined') {
    // Merge shared translations
    translations = deepMerge(translations, sharedTranslations);
  }
  
  // Merge campaign-specific translations
  translations = deepMerge(translations, campaignPageTranslations);
  
  // Apply current language
  applyTranslations();
}

// Deep merge helper function
function deepMerge(target, source) {
  const result = { ...target };
  
  for (const key in source) {
    if (source.hasOwnProperty(key)) {
      if (source[key] instanceof Object && !Array.isArray(source[key]) && target[key]) {
        result[key] = deepMerge(target[key], source[key]);
      } else {
        result[key] = source[key];
      }
    }
  }
  
  return result;
}

// Get translation for a key path
function getTranslation(keyPath, language = currentLanguage) {
  const keys = keyPath.split('.');
  let current = translations;
  
  for (const key of keys) {
    if (current && current[key]) {
      current = current[key];
    } else {
      return keyPath; // Return key if translation not found
    }
  }
  
  return current[language] || current['en'] || keyPath;
}

// Apply translations to the page
function applyTranslations() {
  // Update all elements with data-translate attribute
  document.querySelectorAll('[data-translate]').forEach(element => {
    const key = element.getAttribute('data-translate');
    const translation = getTranslation(key);
    
    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
      element.placeholder = translation;
    } else {
      element.innerHTML = translation;
    }
  });
  
  // Update wallet status
  const walletStatus = document.getElementById('walletStatus');
  if (walletStatus) {
    const isConnected = walletStatus.classList.contains('connected');
    const key = isConnected ? 'wallet.connected' : 'wallet.notConnected';
    walletStatus.textContent = getTranslation(key);
  }
  
  // Update mint button
  const mintButton = document.querySelector('.mint-button');
  if (mintButton && !mintButton.disabled) {
    mintButton.textContent = getTranslation('campaign.mint.button');
  }
}

// Change language
function changeLanguage(lang) {
  currentLanguage = lang;
  localStorage.setItem('language', lang);
  applyTranslations();
  
  // Update language selector if it exists
  const selector = document.getElementById('languageSelector');
  if (selector) {
    selector.value = lang;
  }
}

// Helper function to get current translations object (for backward compatibility)
function getCurrentTranslations() {
  const result = {};
  const extractForLanguage = (obj, target = {}, path = '') => {
    for (const key in obj) {
      if (obj.hasOwnProperty(key)) {
        const newPath = path ? `${path}.${key}` : key;
        if (obj[key] && typeof obj[key] === 'object' && obj[key][currentLanguage]) {
          // This is a translation object
          const keys = newPath.split('.');
          let current = target;
          for (let i = 0; i < keys.length - 1; i++) {
            if (!current[keys[i]]) current[keys[i]] = {};
            current = current[keys[i]];
          }
          current[keys[keys.length - 1]] = obj[key][currentLanguage];
        } else if (obj[key] && typeof obj[key] === 'object') {
          // Recurse deeper
          extractForLanguage(obj[key], target, newPath);
        }
      }
    }
  };
  
  extractForLanguage(translations, result);
  return result;
}

// Initialize when DOM is ready
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initTranslations);
} else {
  initTranslations();
}

// Export for use in other scripts
window.campaignTranslations = getCurrentTranslations;
window.getTranslation = getTranslation;
window.changeLanguage = changeLanguage;
window.currentLanguage = currentLanguage;